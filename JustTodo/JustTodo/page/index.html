<!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>MyTodo</title>

    <link rel="stylesheet" href="./index.css">

    <script src="./sober.min.js"></script>
    <script src="./utils.js"></script>

    <script>
        var langJS;
        const userLanguage = navigator.language || navigator.userLanguage;
        switch (userLanguage) {
            case 'zh-CN':
                langJS = userLanguage
                break;
            default:
                langJS = "en-US"
                break
        }
        if (window.webkit) {
            // Xcode项目中，会把子分组中的文件，都直接放在分组根目录下
            loadScript('./' + langJS + '.js')
            loadScript('./abs-bridge.js')
            loadScript('./native-bridge.js')
        } else {
            loadScript('./lang/' + langJS + '.js')
            loadScript('./bridge/abs-bridge.js')
            loadScript('./bridge/web-bridge.js')
        }

        loadScript('./ui.js')
    </script>
</head>

<body>
    <s-page id="app">
        <s-tab id="headerTabs" style="justify-content: flex-start">
            <s-menu id="menu">
                <s-menu-item id="menu_item_delete" onclick="showDelTabDialog()">
                    <s-icon slot="start">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path
                                d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z">
                            </path>
                        </svg>
                    </s-icon>
                    Delete
                </s-menu-item>
            </s-menu>
        </s-tab>

        <div id="dataTableContainer" style="height: 332px;">
            <s-scroll-view id="todoScrollView" style="width: 100%; height: 366px;">
                <div id="emptyView">
                    <image style="width: 60%;" src="./empty.svg">
                </div>
                <ul id="todoList">
                </ul>
            </s-scroll-view>
            <div id="editor">
                <input id="newTodoInput" type="text">
                <s-icon-button id="newTodoCommitBtn" slot="end">
                    <s-icon slot="end">
                        <svg class="svg-hint" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M360-240 120-480l240-240 56 56-144 144h488v-160h80v240H272l144 144-56 56Z"></path>
                        </svg>
                    </s-icon>
                </s-icon-button>
            </div>
        </div>

        <div id="newTabPage">
            <div class="newTabInputWrapper" style="display: flex;">
                <input id="newTabInput" type="text">
                <s-icon-button id="newTabCommitBtn" slot="end">
                    <s-icon slot="end">
                        <svg class="svg-hint" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                            <path d="M360-240 120-480l240-240 56 56-144 144h488v-160h80v240H272l144 144-56 56Z"></path>
                        </svg>
                    </s-icon>
                </s-icon-button>
            </div>
        </div>
        <s-dialog id="dialog">
            <div id="dialog-text" slot="text"></div>
            <s-button id="dialog-negative-btn" slot="action" type="text">取消</s-button>
            <s-button id="dialog-positive-btn" slot="action" type="text">确定</s-button>
        </s-dialog>
    </s-page>
    <script>
        // onPageReady()
    </script>
</body>

</html>